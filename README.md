# casscf

## 0. Fix the coordinates generated by the interpolation program from 

```
 C         -1.852513333333        0.008455333333        0.227550000000
 C         -1.303183333333        1.112345333333       -0.370440000000
 C          0.048366666667        1.393575333333       -0.674560000000
 C          1.159766666667        0.626165333333       -0.444500000000
 C          1.277206666667       -0.714434666667        0.183090000000
 O          2.438956666667       -1.146984666667        0.246480000000
 C          0.155796666667       -1.461104666667        0.678930000000
 C         -1.174713333333       -1.145614666667        0.694480000000
 O          2.352946666667        1.072975333333       -0.806070000000
 H         -2.935743333333        0.011525333333        0.363620000000
 H         -2.005173333333        1.898915333333       -0.659770000000
 H          0.256126666667        2.350325333333       -1.158830000000
 H          0.456586666667       -2.422754666667        1.100490000000
 H         -1.821953333333       -1.907274666667        1.139230000000
 H          2.947526666667        0.323885333333       -0.519700000000
```

To:

```
 C 6        -1.852513333333        0.008455333333        0.227550000000
 C 6        -1.303183333333        1.112345333333       -0.370440000000
 C 6         0.048366666667        1.393575333333       -0.674560000000
 C 6         1.159766666667        0.626165333333       -0.444500000000
 C 6         1.277206666667       -0.714434666667        0.183090000000
 O 8         2.438956666667       -1.146984666667        0.246480000000
 C 6         0.155796666667       -1.461104666667        0.678930000000
 C 6        -1.174713333333       -1.145614666667        0.694480000000
 O 8         2.352946666667        1.072975333333       -0.806070000000
 H 1        -2.935743333333        0.011525333333        0.363620000000
 H 1        -2.005173333333        1.898915333333       -0.659770000000
 H 1         0.256126666667        2.350325333333       -1.158830000000
 H 1         0.456586666667       -2.422754666667        1.100490000000
 H 1        -1.821953333333       -1.907274666667        1.139230000000
 H 1         2.947526666667        0.323885333333       -0.519700000000
```

(H = 1, C = 6, N = 7, O = 8, B = 5)

## 1. Take each set of coordinates from the 'interpolated' file and put a header at the top found in 'rhf_input.txt'
```
 $BASIS GBASIS=ccd $END
 $CONTRL SCFTYP=RHF RUNTYP=ENERGY ISPHER=1 $END
 $NBO $END
 $SYSTEM MWORDS=512 MEMDDI=128 $END	
```

## 2. Put ' $END' at the bottom 
## 3. Do this for every set of coordinates to make '1_rhf.inp, 2_rhf.inp' etc...
Files will look like this: 

```
 $BASIS GBASIS=ccd $END
 $CONTRL SCFTYP=RHF RUNTYP=ENERGY ISPHER=1 $END
 $NBO $END
 $SYSTEM MWORDS=512 MEMDDI=128 $END

 $DATA
Structure 1
C1
 C 6        -1.852513333333        0.008455333333        0.227550000000
 C 6        -1.303183333333        1.112345333333       -0.370440000000
 C 6         0.048366666667        1.393575333333       -0.674560000000
 C 6         1.159766666667        0.626165333333       -0.444500000000
 C 6         1.277206666667       -0.714434666667        0.183090000000
 O 8         2.438956666667       -1.146984666667        0.246480000000
 C 6         0.155796666667       -1.461104666667        0.678930000000
 C 6        -1.174713333333       -1.145614666667        0.694480000000
 O 8         2.352946666667        1.072975333333       -0.806070000000
 H 1        -2.935743333333        0.011525333333        0.363620000000
 H 1        -2.005173333333        1.898915333333       -0.659770000000
 H 1         0.256126666667        2.350325333333       -1.158830000000
 H 1         0.456586666667       -2.422754666667        1.100490000000
 H 1        -1.821953333333       -1.907274666667        1.139230000000
 H 1         2.947526666667        0.323885333333       -0.519700000000
 $END
```

## 4. Run these files with GAMESS to generate the '.out' and '.dat' files 
## 5. Look at orbitals (my job) and create list of reordering instructions in a seperate file 'reoderings.txt' which will look like: 

```
IORDER(27)=28,30,27.29,31,32,33,34,41,42,35,36,37,38,39,40
IORDER(27)=28,30,27.29,31,32,33,34,41,42,35,36,37,38,39,40
IORDER(27)=28,30,27.29,31,32,33,34,41,42,35,36,37,38,39,40
IORDER(28)=30,28,29,31,32,33,34,38,42,35,36,37,39,40,41
IORDER(28)=30,28,29,31,32,33,34,37,42,35,36,38,39,40,41
IORDER(28)=30,28,29,31,32,33,34,36,42,35,37,38,39,40,41
IORDER(28)=30,28,29,31,32,33,34,36,42,35,37,38,39,40,41
IORDER(28)=30,28,29,31,32,33,34,35,42,36,37,38,39,40,41
IORDER(28)=30,28,29,31,32,33,34,35,42,36,37,38,39,40,41
```

At this point, the working directory should look like this:

```
-rw-r--r--   1 apricot  staff    18K 17 Dec 19:01 interpolated.xyz
-rw-r--r--@  1 apricot  staff   431B 17 Dec 19:13 reorderings.txt
-rw-r--r--@  1 apricot  staff   1.2K 17 Dec 19:35 1_rhf.inp
-rw-r--r--@  1 apricot  staff   1.2K 17 Dec 19:35 1_rhf.out
-rw-r--r--@  1 apricot  staff   1.2K 17 Dec 19:35 1_rhf.dat
```

## 6a. Use 'interpolated' file to generate a new set of input files '$$_casscf.inp' and put a header found in 'casscf_input.txt' 
## 6b. Answer a few questions:

```
1. NUMBER OF ORBITALS // Integer
2. ACTIVE SPACE (ORBITALS) // Integer 
3. ACTIVE SPACE (ELECTRONS) // Integer 
4. NUMEBR OF CORE ELECTRONS // Integer 
5. NUMBER OF STATES (N) // Integer 
6. STATE-AVERAGING INSTRUCTIONS // Integer, Integer, Integer... (i.e. 1,1,1)
```

## 6c. Part of the input file will come from the 'reorderings.txt' file. The end result will look something like this: 

```
 $CONTRL SCFTYP=MCSCF ICHARG=0 MULT=1
  ISPHER=1 $END
 $GUESS GUESS=MOREAD NORB="1" NORDER=1
  "LINE FROM REORDERING FILE" $END
 $BASIS gbasis=ccd $END
 $MCSCF MAXIT=200 focas=.T. CISTEP=ALDET $END
 $SYSTEM MWORDS=128 $END
 $DET NACT="2" NELS="3" NCORE="4" $END
 $DET NSTATE="5" $END
 $DET WSTATE(1)="6" $END
 $CIINP CASTRF=.T. $END
 $STATPT PROJCT=.F. $END

 $DATA
Structure 1
C1
 C 6        -1.852513333333        0.008455333333        0.227550000000
 C 6        -1.303183333333        1.112345333333       -0.370440000000
 C 6         0.048366666667        1.393575333333       -0.674560000000
 C 6         1.159766666667        0.626165333333       -0.444500000000
 C 6         1.277206666667       -0.714434666667        0.183090000000
 O 8         2.438956666667       -1.146984666667        0.246480000000
 C 6         0.155796666667       -1.461104666667        0.678930000000
 C 6        -1.174713333333       -1.145614666667        0.694480000000
 O 8         2.352946666667        1.072975333333       -0.806070000000
 H 1        -2.935743333333        0.011525333333        0.363620000000
 H 1        -2.005173333333        1.898915333333       -0.659770000000
 H 1         0.256126666667        2.350325333333       -1.158830000000
 H 1         0.456586666667       -2.422754666667        1.100490000000
 H 1        -1.821953333333       -1.907274666667        1.139230000000
 H 1         2.947526666667        0.323885333333       -0.519700000000
 $END
```


## 7. Now to add the orbitals on. Copy the part of the file from '--- CLOSED SHELL ORBITALS ---...' until ' $END' and paste that into the '$$_casscf.inp'
The end file will look like:

```
 $CONTRL SCFTYP=MCSCF ICHARG=0 MULT=1
  ISPHER=1 $END
 $GUESS GUESS=MOREAD NORB=156 NORDER=1
  'LINE FROM REORDERING FILE' $END
 $BASIS gbasis=ccd $END
 $MCSCF MAXIT=200 focas=.T. CISTEP=ALDET $END
 $SYSTEM MWORDS=128 $END
 $DET NACT=8 NELS=8 NCORE=27 $END
 $DET NSTATE=10 $END
 $DET WSTATE(1)=1,1 $END
 $CIINP CASTRF=.T. $END
 $STATPT PROJCT=.F. $END

 $DATA
Structure 1
C1
 C 6        -1.852513333333        0.008455333333        0.227550000000
 C 6        -1.303183333333        1.112345333333       -0.370440000000
 C 6         0.048366666667        1.393575333333       -0.674560000000
 C 6         1.159766666667        0.626165333333       -0.444500000000
 C 6         1.277206666667       -0.714434666667        0.183090000000
 O 8         2.438956666667       -1.146984666667        0.246480000000
 C 6         0.155796666667       -1.461104666667        0.678930000000
 C 6        -1.174713333333       -1.145614666667        0.694480000000
 O 8         2.352946666667        1.072975333333       -0.806070000000
 H 1        -2.935743333333        0.011525333333        0.363620000000
 H 1        -2.005173333333        1.898915333333       -0.659770000000
 H 1         0.256126666667        2.350325333333       -1.158830000000
 H 1         0.456586666667       -2.422754666667        1.100490000000
 H 1        -1.821953333333       -1.907274666667        1.139230000000
 H 1         2.947526666667        0.323885333333       -0.519700000000
 $END
--- CLOSED SHELL ORBITALS --- GENERATED AT 20:30:16 08-DEC-2021
Structure 9
E(RHF)=     -418.1243768729, E(NUC)=  412.6560531339,   24 ITERS
 $VEC
 1  1-7.85009382E-05-1.44760020E-04 6.02101842E-04-3.52676164E-05-4.70650046E-06
 1  2-1.52941984E-05 3.17390124E-04-3.78606466E-05 3.86827192E-04 1.71987602E-05
 1  3 1.18415895E-05-2.90403497E-05-2.89981894E-05 1.72204009E-05 2.97021253E-06
 1  4-2.36454254E-05-5.33748066E-05-1.09278819E-03-3.82813360E-05 1.97201991E-05
 1  5 2.34301485E-05-2.95762449E-04 2.39237719E-04 5.56214680E-05-2.03174638E-05
 1  6-2.19314968E-05 4.22489605E-05 7.34113636E-05-2.55862265E-05-6.09587575E-06
 1  7-1.30791994E-04-2.48035351E-04 2.01533475E-03-3.73156323E-05 7.91398986E-05
 1  8-2.34529321E-05-4.01736784E-04-1.09647999E-03 7.58275183E-04-1.21149869E-04
 1  9 1.12916381E-04 8.23348758E-06 4.37138371E-05-2.60359994E-05-1.63860503E-04
 1 10 1.66610812E-04 3.01888962E-04 2.24079998E-03 1.38887976E-04 7.05960698E-05
 1 11-1.11213298E-04 3.79751329E-03 2.01632157E-05-1.52420762E-03-3.73671995E-05
 1 12 1.34749964E-04-9.73827648E-05-1.90020043E-04 8.03191272E-05-9.18445328E-05
 1 13-8.46010731E-05-1.77921868E-04-2.24136667E-04 1.59987786E-06-8.66857270E-05
 1 14 5.74604194E-05-1.45220914E-03-6.31665366E-04 9.31500134E-04 1.54100916E-04
 1 15-7.37906635E-05-8.03102520E-05-1.17294925E-04-1.78880273E-05 7.99583649E-05
 1 16-2.95229555E-04-1.45130631E-04 5.33707672E-04 3.89923808E-05-1.60984320E-05
 1 17 9.25220680E-06-4.04048801E-05 1.85291878E-05-3.00594846E-05-1.08005931E-05
 1 18-5.04814171E-06 1.58487348E-05 1.11216700E-05 2.85392191E-06 2.08973296E-05
 1 19-4.87881951E-05-9.22148751E-05-7.53288571E-04-1.39320948E-05-5.83312136E-05
 1 20 3.18386461E-05-5.38687508E-04 1.41506719E-04-4.66473364E-05 5.86926900E-05
 1 21-2.94538975E-05-2.92387925E-05-1.34828040E-05-2.15980682E-05 3.53737282E-06
 1 22-1.57386383E-05-3.63616522E-05-6.84432437E-04-2.97855725E-05-3.06928221E-05
 1 23 1.25447978E-05 4.96469642E-06-9.09331805E-05 3.80069253E-05 1.06237136E-05
 1 24-3.07309877E-06-7.55061480E-06-8.80629647E-06 1.20560733E-05 1.08880112E-05
 1 25 1.00143090E+00 2.22553078E-03-6.74233740E-03-1.52097781E-04-1.29906073E-03
 1 26 8.94911545E-04 1.18209792E-03 1.17219392E-03-1.21633726E-03-2.37461096E-05
 ...
  $END 
```

Now run the files and make nice looking graphs. 
